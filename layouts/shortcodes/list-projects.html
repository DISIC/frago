{{- $rangepages := where .Site.RegularPages "Section" (.Get "section") -}}
{{- if $rangepages -}}
<section class="section{{ if .Get "type" }}-{{ .Get "type" }}{{ end }} text-center">
<div class="wrapper">
<h2 hidden>{{ with .Site.GetPage (.Get "section") }}{{ .Title }}{{ end }}</h2>
<br>
<ul class="list-unstyled">
{{- range sort $rangepages ".Title" "desc" -}}
{{- $project := (replace (index (split .Path "/") 1) ".md" "") -}}
{{- $.Scratch.Set "projectfolders" "/static" -}}
{{- if eq (len (split .RelPermalink "/")) 4 -}}
{{- $.Scratch.Set "projectfolders" (printf "/static/%s" $project) -}}
{{- end -}}
{{- $accessibility := (fileExists (printf "%s/accessibility.csv" ($.Scratch.Get "projectfolders"))) -}}
{{- $quality       := (fileExists (printf "%s/quality/" ($.Scratch.Get "projectfolders"))) -}}
{{- $lighthouse    := (fileExists (printf "%s/lighthouse/" ($.Scratch.Get "projectfolders"))) -}}
  <li>
    <a class="card-inline card-shadow" href="{{ .Permalink }}">
      <h3 class="h4">{{ .Title }}</h3>
      {{- if or $accessibility $quality $lighthouse -}}
      <div class="flex flex-gap align-items-center text-center">
      {{- if (fileExists (printf "%s/quality/" ($.Scratch.Get "projectfolders"))) -}}<p class="mb-0">{{- partial "components/scores/quality-small" (dict "context" . "project" $project) -}}</p>{{ end }}
      {{- if (fileExists (printf "%s/lighthouse/" ($.Scratch.Get "projectfolders"))) -}}<p class="mb-0">{{- partial "components/scores/performance-small" (dict "context" . "project" $project) -}}</p>{{ end }}
      {{- if (fileExists (printf "%s/accessibility.csv" ($.Scratch.Get "projectfolders"))) -}}<p class="mb-0">{{- partial "components/scores/accessibility-small" (dict "context" . "auditfile" ((getCSV "," (printf "%s/accessibility.csv" ($.Scratch.Get "projectfolders"))))) -}}</p>{{ end }}
      </div>
      {{- end -}}
    </a>
  </li>
{{- end -}}
</ul>
</div>
{{- .Inner -}}
</section>
{{- end -}}
